# Round Robin simulator


**Notes:**

1. This round robin sceduler checks for arriving processes every second to put in the ready queue. The information of arrival and burst time of all the processes is not present beforehand.
2. If the simulation detects that an existing process completes it's time slice at the same time as a new process arrives, The existing process is inserted in the ready queue before inserting the newly arriving process.

**Process block**
``` c++
struct Process {
    // Process ID, consecutively numbered starting with 0
    int id = -1;
    // Arrival time of the process, arrival_time >= 0
    int64_t arrival_time = -1;
    // Burst time > 0
    int64_t burst = -1;

    // set this to the the time point where the process started executing
    // on the CPU
    int64_t start_time = -1;
    // set this to the time point when the process finishe executing
    int64_t finish_time = -1;
};

```
**Scheduled process block states**

```c++
struct Process_State {
  struct Process *process;
  int64_t rem_burst_t;
  bool completed;
  bool added_to_queue;
  Process_State(struct Process &process) {
    this->process = &process;
    this->rem_burst_t = process.burst;
    this->completed = this->added_to_queue = false;
    this->process->start_time = this->process->finish_time = INVALID_TIME;
  }
};

```

Assumptions:

1. Input processes are sorted by their arrival time, in ascending order.
2. Processes arriving at the same time are put in the ready queue in the same order as they are listed
3. Process ID's start with 0 and increment by 1
4. Range of all params - `[ 1 ... 2^62 ]`

To compile all code, type:
```
$ make
```

To run the resulting code on file test1.txt with quantum=3 and max. execution sequence length of 20:
```
$ ./scheduler 3 20 < test1.txt
```
* Quantum time means what slice of time should be given to a process in an iteration
* Max execution sequence length means how much length of output process execution should be printed on the terminal. If no process is executed in a time frame, output -1

## Test files

The repository includes several test files. Here are correct results for these test files.

```
$ ./scheduler 3 20 < slides.txt
seq = [0,1,2,3,0,4,1,3]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    0 |                    6 |                    0 |                   15 |
|  1 |                    0 |                    6 |                    3 |                   20 |
|  2 |                    1 |                    3 |                    6 |                    9 |
|  3 |                    2 |                    8 |                    9 |                   25 |
|  4 |                    3 |                    2 |                   15 |                   17 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 3 20 < test1.txt
seq = [-1,0,1,0,2,1,0]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    1 |                   10 |                    1 |                   19 |
|  1 |                    3 |                    5 |                    4 |                   15 |
|  2 |                    5 |                    3 |                   10 |                   13 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 1 20 < test1.txt
seq = [-1,0,1,0,1,2,0,1,2,0,1,2,0,1,0]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    1 |                   10 |                    1 |                   19 |
|  1 |                    3 |                    5 |                    4 |                   16 |
|  2 |                    5 |                    3 |                    7 |                   14 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 1 5 < test1.txt
seq = [-1,0,1,0,1]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    1 |                   10 |                    1 |                   19 |
|  1 |                    3 |                    5 |                    4 |                   16 |
|  2 |                    5 |                    3 |                    7 |                   14 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 100 20 < test2.txt
seq = []
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 300000000000 40 < test3.txt
seq = [-1,0,1,0,2,1,0]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |         100000000000 |        1000000000000 |         100000000000 |        1900000000000 |
|  1 |         300000000000 |         500000000000 |         400000000000 |        1500000000000 |
|  2 |         500000000000 |         300000000000 |        1000000000000 |        1300000000000 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 30000000000 1000 < test3.txt
seq = [-1,0,1,0,1,0,1,0,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,2,1,0,1,0,1,0,1,0]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |         100000000000 |        1000000000000 |         100000000000 |        1900000000000 |
|  1 |         300000000000 |         500000000000 |         310000000000 |        1590000000000 |
|  2 |         500000000000 |         300000000000 |         550000000000 |        1390000000000 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 1 40 < test3.txt
seq = [-1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |         100000000000 |        1000000000000 |         100000000000 |        1900000000000 |
|  1 |         300000000000 |         500000000000 |         300000000001 |        1600000000000 |
|  2 |         500000000000 |         300000000000 |         500000000002 |        1400000000000 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 1 40 < test4.txt
seq = [-1,0,1,0,1,0,1,0,1,0,1,2,0,1,0,-1,3]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    5 |                   10 |                    5 |                   22 |
|  1 |                    6 |                    6 |                    7 |                   19 |
|  2 |                   14 |                    1 |                   16 |                   17 |
|  3 |                   50 |                   17 |                   50 |                   67 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 3 40 < test4.txt
seq = [-1,0,1,0,1,0,2,0,-1,3]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                    5 |                   10 |                    5 |                   22 |
|  1 |                    6 |                    6 |                    8 |                   17 |
|  2 |                   14 |                    1 |                   20 |                   21 |
|  3 |                   50 |                   17 |                   50 |                   67 |
+---------------------------+----------------------+----------------------+----------------------+

$ ./scheduler 157 140 < test5.txt
seq = [-1,0,1,2,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,3,4,-1,5]
+---------------------------+----------------------+----------------------+----------------------+
| Id |              Arrival |                Burst |                Start |               Finish |
+---------------------------+----------------------+----------------------+----------------------+
|  0 |                   10 |                 1000 |                   10 |                 4464 |
|  1 |                   30 |                 1000 |                  167 |                 4522 |
|  2 |                  100 |                 1000 |                  324 |                 4580 |
|  3 |                  500 |                 1000 |                  952 |                 4952 |
|  4 |                  501 |                 1000 |                 1109 |                 5010 |
|  5 |              5000000 |                    1 |              5000000 |              5000001 |
+---------------------------+----------------------+----------------------+----------------------+
```
